---
description: User Scenario
globs: 
alwaysApply: false
---
# 온라인 쇼핑 최저가 검색 Agent - 사용자 시나리오 설계

## 핵심 사용자 시나리오

### 시나리오 1: 기본 상품 검색
```
사용자: "아이폰 15 Pro 256GB 최저가 알려줘"

Agent: 🔍 아이폰 15 Pro 256GB 검색 중...
        
        ✅ 쿠팡: 1,350,000원 (무료배송) 
        🔍 11번가 검색 중...
        ✅ 11번가: 1,380,000원 (배송비 2,500원)
        🔍 네이버쇼핑 검색 중...
        ✅ 네이버쇼핑: 1,365,000원 (무료배송)
        
        📊 최저가: 쿠팡 1,350,000원 (무료배송)
        🛒 구매링크: [쿠팡에서 구매하기]
```

### 시나리오 2: 옵션별 비교
```
사용자: "갤럭시 S24 색상별로 가격 비교해줘"

Agent: 🎨 갤럭시 S24 색상별 가격 비교
        
        ⚫ 팬텀 블랙: 950,000원 (쿠팡 최저가)
        🟣 바이올렛: 965,000원 (11번가 최저가)  
        🟡 앰버 옐로우: 970,000원 (네이버 최저가)
        
        💡 팁: 팬텀 블랙이 15,000원 더 저렴해요!
```

### 시나리오 3: 연속 대화 (대화 기억)
```
사용자: "아이폰 15 최저가 찾아줘"
Agent: [검색 결과 제공]

사용자: "그럼 프로 모델은 어때?"
Agent: 이전에 검색한 아이폰 15와 비교해드릴게요!
        
        📱 아이폰 15: 1,250,000원
        📱 아이폰 15 Pro: 1,350,000원
        💰 차이: 100,000원
```

## 사용자 플로우 다이어그램

```mermaid
graph TD
    A[사용자 상품 검색 요청] --> B{검색 유형 판별}
    
    B -->|새로운 상품| C[웹 검색 시작]
    B -->|이전 검색 상품| D[대화 히스토리 확인]
    
    C --> E[스트리밍 응답 시작]
    
    E --> G[MCP1로 인터넷 검색]
    E --> H[MCP2로 인터넷 검색]
    
    G --> J[가격 정보 수집]
    H --> J[가격 정보 수집]
    
    J --> K[데이터 정규화]
    K --> L[최저가 계산]
    L --> M[결과 테이블 생성]
    
    M --> N[사용자에게 결과 제공]
    
    D --> O[이전 정보와 비교]
    O --> P[변동사항 분석]
    P --> N
    
    N --> Q{추가 질문?}
    Q -->|Yes| R[연속 대화 처리]
    Q -->|No| S[세션 종료]
    
    R --> B
```

## 상호작용 패턴

### 1. 에러 처리
```
❌ 11번가에서 해당 상품을 찾을 수 없어요
✅ 다른 쇼핑몰에서 계속 검색할게요!
```

## 예외 상황 처리

### 1. 상품을 찾을 수 없는 경우
```
사용자: "xyz123 모델 최저가 찾아줘"
Agent: 😅 해당 모델명으로는 상품을 찾기 어려워요
       더 구체적인 브랜드명이나 정식 제품명을 알려주시겠어요?
```

### 2. 가격 정보가 불완전한 경우
```
Agent: ⚠️ 일부 쇼핑몰에서 가격 정보를 가져올 수 없어서
       현재 확인 가능한 곳들만 비교해드려요
```

### 3. 네트워크 오류
```
Agent: 🌐 네트워크 상태가 불안정해서 재검색할게요
       잠시만 기다려주세요...
```